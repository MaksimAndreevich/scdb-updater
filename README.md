# SCDB Updater

Система обновления базы данных образовательных учреждений Российской Федерации.

## Описание

Проект предназначен для сбора, обработки и обновления информации об образовательных учреждениях РФ. Система обрабатывает данные из различных источников и формирует структурированную базу данных с информацией о:

- Образовательных учреждениях
- Регионах
- Городах
- Федеральных округах
- Типах образовательных учреждений

## Требования

- Go 1.24.3 или выше
- Доступ к интернету для загрузки данных

## Установка

1. Клонируйте репозиторий:

```bash
git clone [url-репозитория]
cd updater
```

2. Установите зависимости:

```bash
go mod download
```

3. Создайте файл `.env` в корневой директории:

```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=scdb
```

## Процесс обновления данных

Система выполняет следующие шаги:

1. Импорт федеральных округов
2. Импорт регионов
3. Импорт городов
4. Импорт типов образовательных учреждений
5. Импорт образовательных учреждений

## Типы образовательных учреждений

Система поддерживает следующие типы:

1. Дошкольное образование
2. Общее образование
3. Среднее профессиональное образование
4. Высшее образование
5. Дополнительное образование
6. Профессиональное обучение
7. Специальное образование
8. Военное образование
9. Религиозное образование
10. Международное образование

Подробная информация о типах и их ключевых словах в [data/org_types.json](data/org_types.json)

## Источники данных

- **Регионы**: [russia-cities](https://github.com/arbaev/russia-cities)
- **Города**: [city](https://github.com/hflabs/city)
- **Образовательные учреждения**: [Реестр организаций](https://obrnadzor.gov.ru/otkrytoe-pravitelstvo/opendata/7701537808-raoo/)
- **Типы образовательных учреждений**: [Федеральный закон "Об образовании в Российской Федерации"](https://base.garant.ru/70291362/)

## Структура базы данных

### Таблицы

#### education_organizations

- id (text) - уникальный идентификатор
- full_name (text) - полное наименование
- short_name (text) - краткое наименование
- post_address (text) - адрес
- phone (text) - телефон
- email (text) - email
- website (text) - веб-сайт
- inn (text) - ИНН
- kpp (text) - КПП
- ogrn (text) - ОГРН
- fk_city_id (text) - связь с городом
- fk_region_id (int) - связь с регионом
- fk_federal_district_id (int) - связь с федеральным округом
- fk_education_type_key (text) - связь с типом образования

#### education_types

- key (text) - уникальный ключ типа
- title (text) - название типа
- level (text) - уровень образования
- ownership_forms (text[]) - формы собственности
- keywords (text[]) - ключевые слова для поиска

#### cities

- fias_id (text) - ФИАС ID
- name (text) - название
- fk_region_id (int) - связь с регионом

#### regions

- id (int) - уникальный идентификатор
- name (text) - название
- fk_federal_district_id (int) - связь с федеральным округом

#### federal_districts

- id (int) - уникальный идентификатор
- name (text) - название

## Логирование

Система использует многоуровневое логирование:

- INFO - информационные сообщения
- WARNING - предупреждения
- ERROR - ошибки
- FATAL - критические ошибки

## Разработка

### Добавление новых типов образовательных учреждений

1. Откройте файл `data/org_types.json`
2. Добавьте новый тип в массив
3. Укажите:
   - key - уникальный ключ
   - title - название
   - level - уровень образования
   - ownership_forms - формы собственности
   - keywords - ключевые слова для поиска

### Добавление новых источников данных

1. Создайте новый файл в директории `data/`
2. Добавьте парсер в `internal/services/`
3. Обновите `main.go`
